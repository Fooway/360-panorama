!function t(e,i,n){function a(o,r){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!r&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return a(i?i:t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("./Util"),r=n(o),h=function(){function t(e,i){a(this,t),this.settings=i,this.width=e.offsetWidth,this.height=e.offsetHeight,this.elementType=i.elementType,this.lon=i.initLon,this.lat=i.initLat,this.phi=0,this.theta=0,this.mouseDown=!1,this.isUserInteracting=!1,this.VRMode=!1,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(i.initFov,this.width/this.height,1,2e3),this.camera.target=new THREE.Vector3(0,0,0),this.renderer=new THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1),this.texture=new THREE.Texture(e),this.texture.needsUpdate=!0,e.style.display="none",this.texture.generateMipmaps=!1,this.texture.minFilter=THREE.LinearFilter,this.texture.maxFilter=THREE.LinearFilter,this.texture.format=THREE.RGBFormat;var n="equirectangular"===this.elementType?new THREE.SphereGeometry(500,60,40):new THREE.SphereBufferGeometry(500,60,40).toNonIndexed();if("fisheye"===this.elementType){for(var s=n.attributes.normal.array,o=n.attributes.uv.array,r=0,h=s.length/3;r<h;r++){var l=s[3*r+0],c=s[3*r+1],u=s[3*r+2],d=Math.asin(Math.sqrt(l*l+u*u)/Math.sqrt(l*l+c*c+u*u))/Math.PI;c<0&&(d=1-d);var m=0==l&&0==u?0:Math.acos(l/Math.sqrt(l*l+u*u));u<0&&(m*=-1),o[2*r+0]=-.8*d*Math.cos(m)+.5,o[2*r+1]=.8*d*Math.sin(m)+.5}n.rotateX(i.rotateX),n.rotateY(i.rotateY),n.rotateZ(i.rotateZ)}n.scale(-1,1,1),this.mesh=new THREE.Mesh(n,new THREE.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh),this.el_=this.renderer.domElement,this.el_.classList.add("threesixty-panorama-canvas"),this.attachControlEvents(),this.animate(),i.callback&&i.callback()}return s(t,[{key:"el",value:function(){return this.el_}},{key:"on",value:function(t,e){this.el().addEventListener(t,e)}},{key:"off",value:function(t,e){this.el().removeEventListener(t,e)}},{key:"enableVR",value:function(){if(this.VRMode=!0,"undefined"!=typeof vrHMD){var t=vrHMD.getEyeParameters("left"),e=vrHMD.getEyeParameters("right");this.eyeFOVL=t.recommendedFieldOfView,this.eyeFOVR=e.recommendedFieldOfView}this.cameraL=new THREE.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3),this.cameraR=new THREE.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3)}},{key:"disableVR",value:function(){this.VRMode=!1,this.renderer.setViewport(0,0,this.width,this.height),this.renderer.setScissor(0,0,this.width,this.height)}},{key:"attachControlEvents",value:function(){this.on("mousemove",this.handleMouseMove.bind(this)),this.on("touchmove",this.handleMouseMove.bind(this)),this.on("mousedown",this.handleMouseDown.bind(this)),this.on("touchstart",this.handleMouseDown.bind(this)),this.on("mouseup",this.handleMouseUp.bind(this)),this.on("touchend",this.handleMouseUp.bind(this)),this.settings.scrollable&&(this.on("mousewheel",this.handleMouseWheel.bind(this)),this.on("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.on("mouseenter",this.handleMouseEnter.bind(this)),this.on("mouseleave",this.handleMouseLease.bind(this))}},{key:"handleResize",value:function(){this.width=this.el().offsetWidth,this.height=this.el().offsetHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.aspect=this.camera.aspect/2,this.cameraR.aspect=this.camera.aspect/2,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix()),this.renderer.setSize(this.width,this.height)}},{key:"handleMouseUp",value:function(t){this.mouseDown=!1}},{key:"handleMouseDown",value:function(t){t.preventDefault();var e=t.clientX||t.touches&&t.touches[0].clientX,i=t.clientY||t.touches&&t.touches[0].clientY;this.mouseDown=!0,this.onPointerDownPointerX=e,this.onPointerDownPointerY=i,this.onPointerDownLon=this.lon,this.onPointerDownLat=this.lat}},{key:"handleMouseMove",value:function(t){var e=t.clientX||t.touches&&t.touches[0].clientX,i=t.clientY||t.touches&&t.touches[0].clientY;if(this.settings.clickAndDrag)this.mouseDown&&(this.lon=.2*(this.onPointerDownPointerX-e)+this.onPointerDownLon,this.lat=.2*(i-this.onPointerDownPointerY)+this.onPointerDownLat);else{var n=t.pageX-this.el_.offsetLeft,a=t.pageY-this.el_.offsetTop;this.lon=n/this.width*430-225,this.lat=a/this.height*-180+90}}},{key:"handleMobileOrientation",value:function(t){if("undefined"!=typeof t.rotationRate){var e=t.rotationRate.alpha,i=t.rotationRate.beta,n="undefined"!=typeof t.portrait?t.portrait:window.matchMedia("(orientation: portrait)").matches,a="undefined"!=typeof t.landscape?t.landscape:window.matchMedia("(orientation: landscape)").matches,s=t.orientation||window.orientation;if(n)this.lon=this.lon-i*this.settings.mobileVibrationValue,this.lat=this.lat+e*this.settings.mobileVibrationValue;else if(a){var o=-90;"undefined"!=typeof s&&(o=s),this.lon=o==-90?this.lon+e*this.settings.mobileVibrationValue:this.lon-e*this.settings.mobileVibrationValue,this.lat=o==-90?this.lat+i*this.settings.mobileVibrationValue:this.lat-i*this.settings.mobileVibrationValue}}}},{key:"handleMouseWheel",value:function(t){t.stopPropagation(),t.preventDefault(),t.wheelDeltaY?this.camera.fov-=.05*t.wheelDeltaY:t.wheelDelta?this.camera.fov-=.05*t.wheelDelta:t.detail&&(this.camera.fov+=1*t.detail),this.camera.fov=Math.min(this.settings.maxFov,this.camera.fov),this.camera.fov=Math.max(this.settings.minFov,this.camera.fov),this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.fov=this.camera.fov,this.cameraR.fov=this.camera.fov,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())}},{key:"handleMouseEnter",value:function(t){this.isUserInteracting=!0}},{key:"handleMouseLease",value:function(t){this.isUserInteracting=!1}},{key:"animate",value:function(){if(this.requestAnimationId=requestAnimationFrame(this.animate.bind(this)),!this.isUserInteracting){var t=this.lat>this.settings.initLat?-1:1,e=this.lon>this.settings.initLon?-1:1;this.settings.backToVerticalCenter&&(this.lat=this.lat>this.settings.initLat-Math.abs(this.settings.returnStepLat)&&this.lat<this.settings.initLat+Math.abs(this.settings.returnStepLat)?this.settings.initLat:this.lat+this.settings.returnStepLat*t),this.settings.backToHorizonCenter&&(this.lon=this.lon>this.settings.initLon-Math.abs(this.settings.returnStepLon)&&this.lon<this.settings.initLon+Math.abs(this.settings.returnStepLon)?this.settings.initLon:this.lon+this.settings.returnStepLon*e)}if(this.lat=Math.max(this.settings.minLat,Math.min(this.settings.maxLat,this.lat)),this.lon=Math.max(this.settings.minLon,Math.min(this.settings.maxLon,this.lon)),this.phi=THREE.Math.degToRad(90-this.lat),this.theta=THREE.Math.degToRad(this.lon),this.camera.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.camera.target.y=500*Math.cos(this.phi),this.camera.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.camera.lookAt(this.camera.target),this.renderer.clear(),this.VRMode){var i=this.width/2,n=this.height;if("undefined"!=typeof vrHMD)this.cameraL.projectionMatrix=r["default"].fovToProjection(this.eyeFOVL,!0,this.camera.near,this.camera.far),this.cameraR.projectionMatrix=r["default"].fovToProjection(this.eyeFOVR,!0,this.camera.near,this.camera.far);else{var a=this.lon+this.settings.VRGapDegree,s=this.lon-this.settings.VRGapDegree,o=THREE.Math.degToRad(a),h=THREE.Math.degToRad(s),l=r["default"].extend(this.camera.target);l.x=500*Math.sin(this.phi)*Math.cos(o),l.z=500*Math.sin(this.phi)*Math.sin(o),this.cameraL.lookAt(l);var c=r["default"].extend(this.camera.target);c.x=500*Math.sin(this.phi)*Math.cos(h),c.z=500*Math.sin(this.phi)*Math.sin(h),this.cameraR.lookAt(c)}this.renderer.setViewport(0,0,i,n),this.renderer.setScissor(0,0,i,n),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(i,0,i,n),this.renderer.setScissor(i,0,i,n),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.camera)}},{key:"onMobile",value:function(){this.settings.autoMobileOrientation&&window.addEventListener("devicemotion",this.handleMobileOrientation.bind(this))}}]),t}();e.exports=h},{"./Util":2}],2:[function(t,e,i){"use strict";function n(){var t,e=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}function a(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}function s(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function o(){return/iPhone|iPod/i.test(navigator.platform)}function r(t){var e=2/(t.leftTan+t.rightTan),i=(t.leftTan-t.rightTan)*e*.5,n=2/(t.upTan+t.downTan),a=(t.upTan-t.downTan)*n*.5;return{scale:[e,n],offset:[i,a]}}function h(t,e,i,n){e=void 0===e||e,i=void 0===i?.01:i,n=void 0===n?1e4:n;var a=e?-1:1,s=new THREE.Matrix4,o=s.elements,h=r(t);return o[0]=h.scale[0],o[1]=0,o[2]=h.offset[0]*a,o[3]=0,o[4]=0,o[5]=h.scale[1],o[6]=-h.offset[1]*a,o[7]=0,o[8]=0,o[9]=0,o[10]=n/(i-n)*-a,o[11]=n*i/(i-n),o[12]=0,o[13]=0,o[14]=a,o[15]=0,s.transpose(),s}function l(t,e,i,n){var a=Math.PI/180,s={upTan:Math.tan(t.upDegrees*a),downTan:Math.tan(t.downDegrees*a),leftTan:Math.tan(t.leftDegrees*a),rightTan:Math.tan(t.rightDegrees*a)};return h(s,e,i,n)}function c(t,e){if(null==t||"object"!=("undefined"==typeof t?"undefined":u(t)))return t;if(t.constructor!=Object&&t.constructor!=Array)return t;if(t.constructor==Date||t.constructor==RegExp||t.constructor==Function||t.constructor==String||t.constructor==Number||t.constructor==Boolean)return new t.constructor(t);e=e||new t.constructor;for(var i in t)e[i]="undefined"==typeof e[i]?c(t[i],null):e[i];return e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.exports={whichTransitionEvent:n,mobileAndTabletcheck:a,isIos:s,isRealIphone:o,fovToProjection:l,extend:c}},{}],3:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){var i=e.parentNode;i.lastchild==e?i.appendChild(t):i.insertBefore(t,e.nextSibling)}var s=t("./lib/Util"),o=n(s),r=t("./lib/Canvas"),h=n(r),l=o["default"].mobileAndTabletcheck(),c={clickAndDrag:l,scrollable:!0,initFov:75,maxFov:105,minFov:51,initLat:0,initLon:-180,returnStepLat:.5,returnStepLon:2,backToVerticalCenter:!l,backToHorizonCenter:!l,minLat:-85,maxLat:85,minLon:-(1/0),maxLon:1/0,elementType:"equirectangular",rotateX:0,rotateY:0,rotateZ:0,autoMobileOrientation:!1,mobileVibrationValue:o["default"].isIos()?.022:1,VREnable:!0,VRGapDegree:2.5},u=function(t,e){var i=o["default"].mobileAndTabletcheck();e=Object.assign(c,e);var n=new h["default"](t,e);a(n.el(),t),i&&n.onMobile()};window.ThreeSixtyPanorama=u},{"./lib/Canvas":1,"./lib/Util":2}]},{},[3]);